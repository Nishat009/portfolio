(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[444],{rWsH:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return G}));var o=n("uWV4"),c=n("LeQr"),i=n("CXP3"),r=n("nNz6"),a=n("3tpO"),s=n("cndP"),p=n("oc8L"),d=n("7hr4"),l=n("o2XC"),u=n("fEKK"),f=n.n(u),h=n("xrhT"),m=n("8mhJ"),j=n("xJQ3"),b=n("cYE0"),O=n.n(b),g=n("xqr9"),y=n.n(g),v=n("6Ivm"),w=n.n(v),x=n("SKy5"),C=n("jxKE"),I=n("MF81"),S=n("h2yo"),D=n("JEKa"),P=n("09TK"),N=n("zGpi"),W=P.c.div.withConfig({displayName:"styles__ColumnsStyled",componentId:"bwroa6-0"})(["display:flex;margin-top:10px;@media (max-width:","){flex-direction:column;"," justify-content:center;}"],N.f.pixels,(function(t){return t.mobileView&&Object(P.b)(["flex-direction:column-reverse;"])})),k=P.c.div.withConfig({displayName:"styles__Column",componentId:"bwroa6-1"})(["width:50%;margin-right:10px;"," "," @media (max-width:","){margin-right:0px;width:100%;}&:last-child{margin-right:0px;margin-left:10px;@media (max-width:","){margin-left:0px;}}"],(function(t){return t.width&&Object(P.b)(["width:",";"],"".concat(t.width,"%"))}),(function(t){return"0"===t.width&&Object(P.b)(["display:none;"])}),N.f.pixels,N.f.pixels),E=P.c.div.withConfig({displayName:"styles__Form",componentId:"bwroa6-2"})(["display:flex;flex-direction:row;flex:1;margin-left:5px;"]),_=P.c.div.withConfig({displayName:"styles__FormHeading",componentId:"bwroa6-3"})(["display:flex;width:70px;align-items:center;"]),K=W,R={comps:[{type:"MarkdownEditor",content:{version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}},hash:"1",width:"50"},{type:"MarkdownEditor",content:{version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}},hash:"2",width:"50"}]},F=n("9atJ"),M=n("TtMJ"),J=n("rI1S"),T=n("B5dE");function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(d.a)(t);if(e){var c=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return Object(p.a)(this,n)}}var A=[{title:"Markdown",type:"MarkdownEditor",component:S.default},{title:"Drawing",type:"MxGraphWidget",component:D.default}],G=function(t){Object(s.a)(n,t);var e=U(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=e.call.apply(e,[this].concat(s)),Object(l.a)(Object(a.a)(t),"compRefs",[]),Object(l.a)(Object(a.a)(t),"leftCompKey",Object(x.d)()),Object(l.a)(Object(a.a)(t),"rightCompKey",Object(x.d)()),Object(l.a)(Object(a.a)(t),"createTooltipObject",(function(t){return Object(o.jsx)(h.a,{id:t,children:t})})),Object(l.a)(Object(a.a)(t),"addWidget",(function(e,n){if(window.confirm(C.o)){var o=A.find((function(t){return t.type===e}));t.props.updateContentState((function(t){t.comps[n].type=o.type,t.comps[n].content=o.component.getComponentDefault(),t.comps[n].hash=n+1}))}})),Object(l.a)(Object(a.a)(t),"saveComponent",(function(){t.compRefs.forEach((function(t){var e;null===t||void 0===t||null===(e=t.saveComponent)||void 0===e||e.call(t)})),t.props.updateContentState((function(e){e.comps=t.props.content.comps}))})),Object(l.a)(Object(a.a)(t),"onUpdateWidth",(function(e,n){var o=parseInt(e,10)||0;t.props.updateContentState((function(t){t.comps[n].width=o.toString(),t.comps[1-n].width=(100-o).toString()}))})),Object(l.a)(Object(a.a)(t),"setPrevDefaultWidth",Object(F.b)((function(t){t[0]&&!t[0].width&&(t[0].width="50"),t[1]&&!t[1].width&&(t[1].width="50")}))),Object(l.a)(Object(a.a)(t),"flipComps",(function(){t.leftCompKey=Object(x.d)(),t.rightCompKey=Object(x.d)(),t.compRefs.forEach((function(t){var e;null===t||void 0===t||null===(e=t.saveComponent)||void 0===e||e.call(t)})),t.props.updateContentState((function(t){t.comps.reverse()}))})),Object(l.a)(Object(a.a)(t),"copy",(function(e){var n,o;null===(n=t.compRefs[e])||void 0===n||null===(o=n.saveComponent)||void 0===o||o.call(n);var i=t.props.content.comps[e],r=(i.hash,Object(c.a)(i,["hash"])),a=O.a.encrypt(JSON.stringify({data:L(L({},r),{},{mode:"view"}),index:e,parentHash:"0"}),C.i).toString();w()(a),t.props.dispatch(I.f.copy(a))})),Object(l.a)(Object(a.a)(t),"paste",(function(e){var n=t.props.widgetsData.copiedWidget;if(n){var o=JSON.parse(O.a.decrypt(n,C.i).toString(y.a)).data;A.map((function(t){return t.type})).includes(o.type)?t.props.updateContentState((function(t){t.comps[e].type=o.type,t.comps[e].content=o.content,t.comps[e].hash=e+1}),(function(){t.compRefs[e].setState(t.props.content.comps[e].content)})):console.warn("No valid widget copied!")}})),t}return Object(r.a)(n,[{key:"shouldComponentUpdate",value:function(t){return!!t.content.comps}},{key:"updateContentState",value:function(t,e){var n=A.find((function(t){return"MxGraphWidget"===t.type})).component.getComponentDefault();this.props.content.waInstantlyOpened&&this.props.content.comps[e].content.svg===n.svg||this.props.updateContentState((function(n){n.comps[e].content=L(L({},n.comps[e].content),t)}))}},{key:"render",value:function(){var t,e,n=this,c=this.props,i=c.mode,r=c.shotId,a=c.pageId,s=c.editorPageId,p=c.authorId,d=c.collectionId,l=c.userId,u=c.widgetsData,f=c.fullScreen,h=c.toggleFullScreen,b=c.fullscreenIconToggle,O=c.showContentDiff,g=c.useDiffContentAsPrimary,y=this.setPrevDefaultWidth(this.props.content.comps),v=null===(t=this.props.compForDiff)||void 0===t||null===(e=t.content)||void 0===e?void 0:e.comps;if("view"===i)return Object(o.jsx)(K,{mobileView:y.length&&"MxGraphWidget"===y[0].type&&"MarkdownEditor"===y[1].type,children:y.map((function(t,e){var c=A.find((function(e){return e.type===t.type}));return t=L(L({},t),{},{content:L(L({},t.content),{},{comp_id:n.props.compId})}),Object(o.jsx)(k,{width:t.width,children:Object(o.jsx)(c.component,{isShot:!!r,mode:i,content:t.content,updateContentState:function(t){return n.updateContentState(t,e)},pageId:a,collectionId:d,authorId:p,userId:l,shotId:parseInt(r,10),fullScreen:f,toggleFullScreen:h,fullscreenIconToggle:b,editorPageId:parseInt(s,10),saveWidgetUserData:n.props.saveWidgetUserData,contentSnapshot:n.props.contentSnapshot,highlights:!0,positionedLeft:0===e,widthOfComp:y[e].width,widthOfOtherComp:y[1-e].width,compForDiff:null===v||void 0===v?void 0:v[e],showContentDiff:O,useDiffContentAsPrimary:g,isDraft:n.props.isDraft})},e)}))});if("edit"===i){var w=u.copiedWidget,x=this.createTooltipObject("Width updates will be visible in view mode.");return Object(o.jsxs)("div",{children:[!O&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"edcomp-toolbar",children:y.map((function(t,e){return Object(o.jsxs)("div",{className:"flex p-2",children:[Object(o.jsxs)(E,{children:[Object(o.jsxs)(_,{children:["Widget ",e+1]}),Object(o.jsx)(m.a,{componentClass:"select",value:y[e].type,onChange:function(t){return n.addWidget(t.target.value,e)},children:A.map((function(t){return Object(o.jsx)("option",{value:t.type,children:t.title},t.type)}))})]}),Object(o.jsxs)(E,{children:[Object(o.jsx)(_,{children:"Width (%)"}),Object(o.jsx)(j.a,{trigger:["hover","focus"],placement:"top",overlay:x,children:Object(o.jsx)(m.a,{maxLength:2,value:y[e].width,style:{marginLeft:5},onChange:function(t){return n.onUpdateWidth(t.target.value,e)}})})]})]},e)}))}),Object(o.jsxs)("div",{className:"flex justify-between items-center",children:[Object(o.jsxs)("div",{className:"inline-flex",children:[Object(o.jsx)("button",{className:"icon-default rounded-full",name:"copy",onClick:function(){return n.copy(0)},children:Object(o.jsx)(M.a,{})}),Object(o.jsx)("button",{className:"icon-default rounded-full",name:"paste",disabled:!w,onClick:function(){return n.paste(0)},children:Object(o.jsx)(J.a,{})})]}),Object(o.jsxs)("button",{className:"outlined-default m-2",onClick:this.flipComps,children:["Flip Columns",Object(o.jsx)(T.a,{className:"icon-right w-5 h-5"})]}),Object(o.jsxs)("div",{className:"inline-flex",children:[Object(o.jsx)("button",{className:"icon-default rounded-full",name:"copy",onClick:function(){return n.copy(1)},children:Object(o.jsx)(M.a,{})}),Object(o.jsx)("button",{className:"icon-default rounded-full",name:"paste",disabled:!w,onClick:function(){return n.paste(1)},children:Object(o.jsx)(J.a,{})})]})]})]}),Object(o.jsx)(K,{children:y.map((function(t,e){var c=A.find((function(e){return e.type===t.type}));return Object(o.jsx)(k,{width:50,children:Object(o.jsx)(c.component,{ref:function(t){n.compRefs[e]=t},content:t.content,mode:i,updateContentState:function(t){return n.updateContentState(t,e)},shotId:parseInt(r,10),editorPageId:parseInt(s,10),dispatch:n.props.dispatch,isColumn:!0,isDraft:n.props.isDraft,pageId:a,collectionId:d,authorId:p,userId:l,config:n.props.config,fullScreen:f,toggleFullScreen:h,fullscreenIconToggle:b,showContentDiff:O})},e?n.rightCompKey:n.leftCompKey)}))})]})}return null}}],[{key:"getComponentDefault",value:function(){return R}}]),n}(f.a.Component);Object(l.a)(G,"defaultProps",{shotId:null,editorPageId:null,useDiffContentAsPrimary:!1})}}]);
//# sourceMappingURL=444.a72a3160338f483162d3.js.map